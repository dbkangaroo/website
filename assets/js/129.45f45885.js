(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{713:function(a,s,t){"use strict";t.r(s);var n=t(13),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"苹果系统-gtk-应用打包新思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#苹果系统-gtk-应用打包新思路"}},[a._v("#")]),a._v(" 苹果系统 GTK 应用打包新思路")]),a._v(" "),t("h2",{attrs:{id:"背景介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景介绍"}},[a._v("#")]),a._v(" 背景介绍")]),a._v(" "),t("p",[a._v("好多苹果系统用户通过各种方式联系本人，期望提供正式的可直接安装使用的安装包(.dmg)；我非常愿意做这件事情，但又觉得困难重重，因为目前没有可供使用的物理机器、且接触使用苹果系统时间不长，对系统了解不够，恐遇到难以解决的问题。")]),a._v(" "),t("p",[a._v("多年的职业素养告诉我：面对它、解决它，事情会逐步得到解决的。")]),a._v(" "),t("p",[a._v("于是我集中精力投入这个事情，尝试了一个又一个的办法，经过8天的持续努力后，终于寻找到了最终解决办法，打包后的应用跑起来了。")]),a._v(" "),t("h2",{attrs:{id:"前置条件和环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前置条件和环境"}},[a._v("#")]),a._v(" 前置条件和环境")]),a._v(" "),t("p",[a._v("本解决方案使用包管理工具 "),t("a",{attrs:{href:"https://brew.sh/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Homebrew"),t("OutboundLink")],1),a._v(" 来安装和管理应用需要的 GTK 及相关的第三方依赖库；")]),a._v(" "),t("p",[a._v("您需要安装 GTK、libgda、GtkSourceView4、Vala、GCC 编译器工具链等；")]),a._v(" "),t("h2",{attrs:{id:"打包解决方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打包解决方案"}},[a._v("#")]),a._v(" 打包解决方案")]),a._v(" "),t("h3",{attrs:{id:"梳理应用目录结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#梳理应用目录结构"}},[a._v("#")]),a._v(" 梳理应用目录结构")]),a._v(" "),t("p",[a._v("为了顺利部署 GTK 应用，应用需要遵循 Linux 应用目录结构，也要遵循 Mac OS X 应用目录结构，组合形成最终的应用目录结构如下：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[Kangaroo.app]\n    └─Contents\n        ├─Info.plist\n        ├─MacOS\n        │  ├─launcher.sh\n        │  └─<Real app>\n        └─Resources\n            ├─bin\n            ├─etc\n            │  └─gtk-3.0\n            ├─include\n            ├─lib\n            │  ├─gdk-pixbuf-2.0\n            │  │  └─2.10.0\n            │  │      └─loaders\n            │  ├─gio\n            │  │  └─modules\n            │  ├─girepository-1.0\n            │  ├─gtk-3.0\n            │  │  └─3.0.0\n            │  │      ├─immodules\n            │  │      └─printbackends\n            │  ├─kangaroo\n            │  │  └─plugins\n            │  │      └─example\n            │  ├─libgda-5.0\n            │  │  └─providers\n            │  ├─pkgconfig\n            │  └─plugin\n            └─share\n                ├─appdata\n                ├─applications\n                ├─doc\n                ├─fontconfig\n                │  └─conf.avail\n                ├─glib-2.0\n                │  └─schemas\n                ├─gtksourceview-4\n                │  ├─language-specs\n                │  └─styles\n                ├─icons\n                │  ├─Adwaita\n                │  └─hicolor\n                ├─licenses\n                │  └─kangaroo\n                ├─locale\n                ├─themes\n                │  ├─Default\n                │  └─Mac\n                └─vala\n                    └─vapi\n")])])]),t("div",[t("script2",{attrs:{type:"text/javascript",async:"true",src:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"}}),a._v(" "),t("ins",{staticClass:"adsbygoogle",staticStyle:{display:"block","text-align":"center"},attrs:{"data-ad-layout":"in-article","data-ad-format":"fluid","data-ad-client":"ca-pub-3975819313740938","data-ad-slot":"6760827895"}}),a._v(" "),t("script2",{attrs:{type:"text/javascript"}},[a._v("\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    ")])],1),a._v(" "),t("h3",{attrs:{id:"苹果应用关键组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#苹果应用关键组件"}},[a._v("#")]),a._v(" 苹果应用关键组件")]),a._v(" "),t("p",[a._v("Mac OS X 应用程序有几个关键组件，他们是：")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[a._v("关键组件")]),a._v(" "),t("th",[a._v("说明")])])]),a._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[a._v("GTK")]),a._v(" "),t("td",[a._v("GTK 库，例如 GTK / GDK / Pango / ...")])]),a._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[a._v("launcher.sh")]),a._v(" "),t("td",[a._v("应用启动脚本，用于设置环境变量，如多语言支持、 Gdk 图形插件 / GTK 输入和打印模块 / libgda 提供插件 / ...")])]),a._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[a._v("应用程序")]),a._v(" "),t("td",[a._v("您的应用程序")])]),a._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[a._v("Info.plist")]),a._v(" "),t("td",[a._v("苹果应用字典文件，包含程序启动需要的配置信息，例如 GtkOSXLaunchScriptFile / CFBundleExecutable / CFBundleIconFiles")])]),a._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[a._v("图标文件")]),a._v(" "),t("td",[a._v("苹果应用图标文件(*.icns)")])])])]),a._v(" "),t("h3",{attrs:{id:"准备应用资源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备应用资源"}},[a._v("#")]),a._v(" 准备应用资源")]),a._v(" "),t("p",[a._v("您应该在编译打包前提前准备好应用所需的资源，他们是：")]),a._v(" "),t("ol",[t("li",[a._v("应用启动脚本：launcher.sh")]),a._v(" "),t("li",[a._v("应用图标文件：image or .icns")]),a._v(" "),t("li",[a._v("应用字典文件：Info.plist")])]),a._v(" "),t("h3",{attrs:{id:"部署应用为-linux-应用格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署应用为-linux-应用格式"}},[a._v("#")]),a._v(" 部署应用为 Linux 应用格式")]),a._v(" "),t("p",[a._v("我们的打包思路的第一步是先在 Mac OS X 上部署为完整的 Linux 应用；")]),a._v(" "),t("p",[a._v("首先请编译并安装应用到指定目录（TARGETDIR）：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("meson --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$TARGETDIR")]),a._v(" --buildtype"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("release build\nninja -C "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PROJECTDIR}")]),a._v('/build"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])]),t("p",[a._v("然后分析应用及其依赖库，复制所有的依赖库文件到前面指定的安装目录（TARGETDIR），构建出一个独立并完整的 Linux 应用；")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("lib_dependency_copy")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 这个函数使用 otool 分析库依赖关系，然后复制所有依赖库到目标目录")]),a._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("local")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("target")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("local")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("folder")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("libraries")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("otool -L $target "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/*.*dylib"')]),a._v(" -o "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("xargs")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v('"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[a._v("lib")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$libraries")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/usr/lib/'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${lib"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("0"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("9}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/System/Library/'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${lib"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("0"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("16}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -n "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$lib")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$folder")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("  \n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function-name function"}},[a._v("lib_dependency_analyze")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 这个函数使用 otool 分析库依赖关系，")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 逐个分析指定目录内的所有库，然后复制所有依赖库到目标目录")]),a._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("local")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("library_dir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("local")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("targets_dir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("libraries")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("find")]),a._v(" $library_dir -name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("*.dylib -o -name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("*.so -type f"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v('"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[a._v("lib")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$libraries")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v("\n      lib_dependency_copy "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$lib")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$targets_dir")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 复制应用依赖库到目标目录")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" -n "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Copy app dependency library......"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -f "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PROJECTDIR}")]),a._v('/build/src/kangaroo"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -f "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/lib/libkangaroo.dylib"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -f "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PROJECTDIR}")]),a._v('/tools/mac_launcher.sh"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin/launcher.sh"')]),a._v("\n\nlib_dependency_copy "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PROJECTDIR}")]),a._v("/build/src/libkangaroo.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\nlib_dependency_copy "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v("/bin/libglib-2.0.0.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\nlib_dependency_copy "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v("/bin/libgtk-3.0.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\nlib_dependency_copy "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v("/bin/libjson-glib-1.0.0.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\nlib_dependency_copy "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v("/bin/libsoup-2.4.1.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\nlib_dependency_copy "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v("/bin/libgtksourceview-4.0.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -f /usr/local/lib/libgtkmacintegration-gtk3.2.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -f /usr/local/lib/libgirepository-1.0.1.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -f /usr/local/lib/librsvg-2.2.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -f /usr/local/lib/libgthread-2.0.0.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -f /usr/local/lib/libcroco-0.6.3.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -f /usr/local/lib/p11-kit-proxy.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -f /usr/local/lib/libgmpxx.4.dylib "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v('/bin"')]),a._v("\n\nlib_dependency_analyze "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v("/bin "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TARGETDIR}")]),a._v("/bin\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"[done]"')]),a._v("\n")])])]),t("h3",{attrs:{id:"封装-linux-应用为苹果应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#封装-linux-应用为苹果应用"}},[a._v("#")]),a._v(" 封装 Linux 应用为苹果应用")]),a._v(" "),t("p",[a._v("转换完整且独立的 Linux 应用为 Mac OS X 应用结构，只需要遵循 Mac OS X 应用目录结构调整即可；")]),a._v(" "),t("p",[t("strong",[a._v("如何校验转换后的应用及依赖库是否是自包含和自我依赖的？")]),t("br"),a._v("\n目前还不能校验，需要完成下一阶段的工作解决库定位问题才能校验，否则会无法启动，依赖库路径也不相符；")]),a._v(" "),t("div",[t("ins",{staticClass:"adsbygoogle",staticStyle:{display:"block","text-align":"center"},attrs:{"data-ad-layout":"in-article","data-ad-format":"fluid","data-ad-client":"ca-pub-3975819313740938","data-ad-slot":"6760827895"}}),a._v(" "),t("script2",{attrs:{type:"text/javascript"}},[a._v("\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    ")])],1),a._v(" "),t("h3",{attrs:{id:"更新应用及依赖库链接路径"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更新应用及依赖库链接路径"}},[a._v("#")]),a._v(" 更新应用及依赖库链接路径")]),a._v(" "),t("p",[a._v("经过几天的折腾，发现苹果系统上打包最重要的问题是在运行时如何解决库查找定位的问题，即以什么顺序查找依赖库、在哪里找到依赖库；经过查阅资料，发现有两种途径可以解决上述问题：")]),a._v(" "),t("ol",[t("li",[a._v("使用库分析处理工具（otool and install_name_tool）来添加或替换库链接路径")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Gdk-pixbuf plugins")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("pixbuf_plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("find")]),a._v(" $APP_LIB_DIR/gdk-pixbuf-2.0/2.10.0/loaders/ -name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("*.dylib -o -name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("*.so -type f"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v('"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[a._v("pixbuf_plugin")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$pixbuf_plugins")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v("\n  lib_change_paths "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    @executable_path/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/Resources/lib "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$APP_LIB_DIR")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$pixbuf_plugin")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("done")]),a._v("\n\nlib_change_paths "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  @executable_path/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/Resources/lib "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$APP_LIB_DIR")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$APP_EXE_DIR")]),a._v("/gdbus\n\nlib_change_siblings "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$APP_LIB_DIR")]),a._v(" @loader_path\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("使用环境变量来告诉加载库如何找到它需要的库")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("DYLD_LIBRARY_PATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bundle_lib")]),a._v('"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("XDG_CONFIG_DIRS")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bundle_etc")]),a._v('"')]),a._v("/xdg\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("XDG_DATA_DIRS")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bundle_data")]),a._v('"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GTK_DATA_PREFIX")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bundle_res")]),a._v('"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GTK_EXE_PREFIX")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bundle_res")]),a._v('"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GTK_PATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bundle_res")]),a._v('"')]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# PANGO_* is no longer needed for pango >= 1.38")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PANGO_RC_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bundle_etc")]),a._v('/pango/pangorc"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PANGO_SYSCONFDIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bundle_etc")]),a._v('"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PANGO_LIBDIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bundle_lib")]),a._v('"')]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Pixbuf plugins")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GDK_PIXBUF_MODULEDIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bundle_lib")]),a._v('/gdk-pixbuf-2.0/2.10.0/loaders"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GDK_PIXBUF_MODULE_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bundle_lib")]),a._v('/gdk-pixbuf-2.0/2.10.0/loaders.cache"')]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# MySQL / MaridDB plugins")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LIBMYSQL_PLUGIN_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$bundle_lib")]),a._v('/plugin"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("LIBMYSQL_ENABLE_CLEARTEXT_PLUGIN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Y\n")])])]),t("h3",{attrs:{id:"验证应用是否打包成功-app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#验证应用是否打包成功-app"}},[a._v("#")]),a._v(" 验证应用是否打包成功(.app)")]),a._v(" "),t("p",[a._v("目前有两种方法可以帮助我们验证应用的完整性："),t("br")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("启动并调试应用进行验证"),t("br"),a._v(" "),t("code",[a._v("GTK_DEBUG_LAUNCHER=yes MyApp.app/Contents/MacOS/MyApp")]),t("br"),a._v("\n这个命令可以打印出详细的脚本步骤和输出，输出日志到控制台供分析查看；"),t("br"),t("br"),a._v("\n发现问题需要调试，可以执行下面的命令进入调试状态调试应用"),t("br"),a._v(" "),t("code",[a._v("GTK_DEBUG_GDB=yes MyApp.app/Contents/MacOS/MyApp")])])]),a._v(" "),t("li",[t("p",[a._v("使用动态库分析工具列出库的详细依赖库进行验证"),t("br"),a._v(" "),t("code",[a._v("otool -L MyApp.app/Contents/MacOS/MyApp")]),t("br"),a._v("\n这个命令可以列出应用的详细依赖库及其链接库位置")])])]),a._v(" "),t("h3",{attrs:{id:"创建dmg安装包-dmg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建dmg安装包-dmg"}},[a._v("#")]),a._v(" 创建DMG安装包（.dmg）")]),a._v(" "),t("p",[a._v("创建DMG安装包有非常多的工具，我选择了 "),t("a",{attrs:{href:"https://github.com/LinusU/node-appdmg",target:"_blank",rel:"noopener noreferrer"}},[a._v("node-appdmg"),t("OutboundLink")],1),a._v(" 来创建DMG安装包，因为它提供了 JSON 配置文件且有详细的处理步骤和日志输出，用户体验比较好；")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"title"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Kangaroo installer"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"icon"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kangaroo.icns"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"background"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kangaroo_dmg_background.png"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"contents"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"x"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("448")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"y"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("170")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"link"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"path"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/Applications"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"x"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"y"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("170")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"file"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"path"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kangaroo.app"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# make installer package")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"make macos installer(.dmg)......"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PROJECTDIR}")]),a._v('/tools/installers/dmg.json"')]),a._v(" kangaroo_dmg.json\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PROJECTDIR}")]),a._v('/data/assets/background.png"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${PROJECTDIR}")]),a._v('/build/kangaroo_dmg_background.png"')]),a._v("\nappdmg kangaroo_dmg.json "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kangaroo-'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${VERSION}")]),a._v('-macos.dmg"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$?")]),a._v(" -eq "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"[done]"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"[failed]"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n")])])]),t("div",[t("ins",{staticClass:"adsbygoogle",staticStyle:{display:"block","text-align":"center"},attrs:{"data-ad-layout":"in-article","data-ad-format":"fluid","data-ad-client":"ca-pub-3975819313740938","data-ad-slot":"6760827895"}}),a._v(" "),t("script2",{attrs:{type:"text/javascript"}},[a._v("\n        (adsbygoogle = window.adsbygoogle || []).push({});\n    ")])],1),a._v(" "),t("h2",{attrs:{id:"打包脚本源代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打包脚本源代码"}},[a._v("#")]),a._v(" 打包脚本源代码")]),a._v(" "),t("p",[a._v("本着回馈社区、与 "),t("a",{attrs:{href:"https://www.gnome.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("GNOME"),t("OutboundLink")],1),a._v(" 桌面共成长的良好愿景，在此把袋鼠数据库工具的完整打包脚本分享出来，供大家自由使用和分发；")]),a._v(" "),t("p",[t("a",{attrs:{href:"/sources/Info.plist"}},[a._v("Info.plist")]),t("br"),a._v(" "),t("a",{attrs:{href:"/sources/mac_launcher.sh"}},[a._v("mac_launcher.sh")]),t("br"),a._v(" "),t("a",{attrs:{href:"/sources/mac_app_path.sh"}},[a._v("mac_app_path.sh")]),t("br"),a._v(" "),t("a",{attrs:{href:"/sources/mac_app_pack.sh"}},[a._v("mac_app_pack.sh")]),t("br"),a._v(" "),t("a",{attrs:{href:"/sources/deploy_macos.sh"}},[a._v("deploy_macos.sh")])]),a._v(" "),t("h2",{attrs:{id:"参考资源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资源"}},[a._v("#")]),a._v(" 参考资源")]),a._v(" "),t("p",[a._v("在寻找解决方案的过程中，从以下项目和资源中获得了灵感，有的甚至直接提取其源代码加以修改实现，详细列出供大家参考")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/LinusU/node-appdmg",target:"_blank",rel:"noopener noreferrer"}},[a._v("node-appdmg"),t("OutboundLink")],1),t("br"),a._v(" "),t("a",{attrs:{href:"https://gist.github.com/oubiwann/453744744da1141ccc542ff75b47e0cf",target:"_blank",rel:"noopener noreferrer"}},[a._v("oubiwann's appify.sh"),t("OutboundLink")],1),t("br"),a._v(" "),t("a",{attrs:{href:"https://gitlab.com/inkscape/inkscape/-/blob/master/packaging/macos/bash_d/lib_.sh",target:"_blank",rel:"noopener noreferrer"}},[a._v("inkscape packaging: lib_.sh"),t("OutboundLink")],1),t("br"),a._v(" "),t("a",{attrs:{href:"https://gitlab.gnome.org/GNOME/gtk-mac-bundler/-/blob/master/examples/gtk3-launcher.sh",target:"_blank",rel:"noopener noreferrer"}},[a._v("gtk-mac-bundler gtk3-launcher.sh"),t("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);